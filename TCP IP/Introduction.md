# Introduction
 > 各种型号的计算机，它们运行完全不同的操作系统，但 TCP协议族允许它们互相进行通信
起源于6 0年代末美国政府资助的一个分组交换网络研究项目发展成为计算机之间最常应用的组网形式


* 分层
  * 网络协议通常分不同层次进行开发，每一层分别负责不同的通信功能
  * 一个协议族，比如 TCP，是一组不同层次上的多个协议的组合
* 链路层
  * 通常包括操作系统中的设备驱动程序和计算机中对应的网络接口卡。
  * 处理与电缆 或其他任何传输媒介的物理接口细节。

* 网络层
  * 处理分组在网络中的活动，例如分组的选路
  * TCP协议族中，网络层协议包括 IIP协议（网际协议），ICMP协议（Internet互联网控	制报文协议），以及IGMP协议（Internet组管理协议）。

* 运输层主要为两台主机上的应用程序提供端到端的通信
	* 在 TCP/IP协议族中，有两个互不相同的传输协议：TCP（传输控制协议）和UDP（用户数据报协议）。
	* TCP为两台主机提供高可靠性的数据通信 
		* 把应用程序交给它的数据分成合适的小块交给下面的网络层，确认接收到的分组，设置发送最后确认分组的超时时钟等。
	* 由于运输层提供了高可靠性的端到端的通信，因此应用层可以忽略所有这些细节。
	* 而另一方面，UDP则为应用层提供一种非常简单的服务
		* 它只是把称作数据报的分组从一台主机发送到另一台主机 不保证成功。但可靠性必须由应用层来提供。
	* 这两种运输层协议分别在不同的应用程序中有不同的用途
	
* 应用层负责处理特定的应用程序细节
	* 几乎各种不同的 TCP/IP实现都会提供下面这些通用的应用程序
	* Telnet 远程登录。
	* FTP 文件传输协议。
	* SMTP 简单邮件传送协议。
	* SNMP 简单网络管理协议

* Route
  * 构造互连网最简单的方法是把两个或多个网络通过路由器进行连接。特殊的用于网络互连的硬件盒。
	* 路由器的好处是为不同类型的物理网络提供连接：以太网、令牌环网点对点的链接和FDDI（光纤分布式数据接口）等等。
	* 这些盒子也称作IP路由器（IP Route），但我们这里使用路由器(Route)这个术语。
	* 从历史上说，这些盒子称作网关 gatway，在很多TCP/IP文献中都使用这个术语。现在网关这个术语只用来表示应用层网关：
		* 一个连接两种不同协议族的进程（例如，TCP/IP和IBM的SNA），它为某个特定的应用程序服务（常常是电子邮件或文件传输）
	* 一个路由器具有两个或多个网络接口层（因为它连接了两个或多个网络）
		* 功能只是单纯地把分组从一个接口传送到另一个接口
		* 同样路由器并不一定指那种在互联网中用来转发分组的特殊硬件盒。
* 多数的 TCP/IP实现也允许一个多接口主机来担当路由器的功能，但主机为此必须进行特殊的配置
	* 在这种情况下，称该系统为主机

* 在TCP协议族中 网络层IP提供的是一种不可靠的服务尽可能快地把分组从源结点送到目的结点不提供任何可靠性保证
	* 而另一方面,TCP在不可靠的IP层上提供了一个可靠的运输层 提供这种可靠的服务TCP采用了超时重传、发送和接收端到端的确认分组等机制
	* 由此可见，运输层和网络层分别负责不同的功能。
	
## TCP/IP的分层

* TCP和UDP是两种最为著名的运输层协议，二者都使用 I P作为网络层协议。
	* TCP使用不可靠的I P服务，但它却提供一种可靠的运输层服务。
	* UDP为应用程序发送和接收数据报。
		* 个数据报是指从发送方传输到接收方的一个信单元（例如，发送方指定的一定字节数的信息）但是与TCP不同的是，UDP是不可靠的
* I P是网络层上的主要协议，同时被 T C P和U D P使用
	* T C P和U D P的每组数据都通过端系统和每个中间路由器中的I P层在互联网中进行传输
* I C M P是I P协议的附属协议
	* I P层用它来与其他主机或路由器交换错误报文和其他重要信息。
* I G M P是I n t e r n e t组管理协议
	* 它用来把一个U D P数据报多播到多个主机。
* A R P（地址解析协议）和R A R P（逆地址解析协议）
	* 是某些网络接口（如以太网和令牌环网）使用的特殊协议，用来转换 I P层和网络接口层使用的地址
	


## 互联网的地址
> 互联网上的每个接口必须有一个唯一的 IPP地址
IP地址长32 bit。Interen地址并不采用平面形式的地址空间

* 三类I P地址
* 单播地址（目的为单个主机）
* 广播地址（目的端为给定网络上的所有主机）
* 多播地址

## 域名系统

* 尽管通过I P地址可以识别主机上的网络接口，进而访问主机，但是人们最喜欢使用的还是主机名。
	* 在TCP/IP领域中，域名系统（DNS）是一个分布的数据库，由它来提供 I P地址和主机名之间的映射信息
	
	
	## 封装
* 当应用程序用T C P传送数据时，数据被送入协议栈中，然后逐个通过每一层直到被当作一串比特流送入网络。
	* 其中每一层对收到的数据都要增加一些首部信息（有时还要增加尾部信息），
	* 该过程如图 1 - 7所示 TCP传给I P的数据单元称作 T C P报文段或简称为 TCP段（T C Ps e g m e n t）
	* I P传给网络接口层的数据单元称作 I P数据报(IP datagram)。通过以太网传输的比特流称作帧(Fr a m e )。
