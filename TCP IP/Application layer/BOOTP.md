# BOOTP
> B O O T P使用U D P，且通常需与 T F T P（参见第 1 5章）协同工作。 RFC 951 [Croft and
Gilmore 1985]是B O O T P的正式规范，RFC 1542 [Wimer 1993]则对它作了说明。

* BOOTP 的分组格式
BOOTP 请求和应答均被封装在U D P数据报中
“操作码”字段为1表示请求，为2表示应答。硬件类型字段为 1表示10 Mb/s的以太网，这
和A R P请求或应答（图4 - 3）中同名字段表示的含义相同。类似地，对于以太网，硬件地址长
度字段为6字节。
“跳数”字段由客户设置为0，但也能被一个代理服务器设置（参见 1 6 . 5节）。
“事务标识”字段是一个由客户设置并由服务器返回的 32 bit整数。客户用它对请求和应
答进行匹配。对每个请求，客户应该将该字段设置为一个随机数。
客户开始进行引导时，将“秒数”字段设置为一个时间值。服务器能够看到这个时间值，
备用服务器在等待时间超过这个时间值后才会响应客户的请求，这意味着主服务器没有启动。
如果该客户已经知道自身的 I P地址，它将写入“客户 I P地址”字段。否则，它将该字段
设置为0。对于后面这种情况，服务器用该客户的 I P地址写入“你的 I P地址”字段。“服务器
I P地址”字段则由服务器填写。如果使用了某个代理服务器（见 1 6 . 5节），则该代理服务器就
填写“网关I P地址”字段。
客户必须设置它的“客户硬件地址”字段。尽管这个值与以太网数据帧头中的值相同，
U D P数据报中也设置这个字段，但任何接收这个数据报的用户进程能很容易地获得它（例如一个BOOTP 服务器）。
一个进程通过查看U D P数据报来确定以太网帧首部中的该字段通常是
很困难的（或者说是不可能的）。

“服务器主机名”字段是一个空值终止串，由服务器填写。服务器还将在“引导文件名字
段”填入包括用于系统引导的文件名及其所在位置的路径全名。
“特定厂商区域”字段用于对B O O T P进行不同的扩展。1 6 . 6节将介绍这些扩展中的一些。
当一个客户使用 B O O T P（操作码为1）进行系统引导时，引导请求通常是采用链路层广
播，I P首部中的目的 I P地址为 2 5 5 . 2 5 5 . 2 5 5 . 2 5 5（受限的广播， 1 2 . 2节）。源I P地址通常是
0 . 0 . 0 . 0，因为此时客户还不知道它本身的 I P地址。回顾图3 - 9，在系统进行自引导时， 0 . 0 . 0 . 0
是一个有效的I P地址。
端口号
B O O T P有两个熟知端口：BOOTP 服务器为6 7，BOOTP 客户为6 8。这意味着BOOTP 客
户不会选择未用的临时端口，而只用端口 6 8。选择两个端口而不是仅选择一个端口为 B O O T P
服务器用的原因是：服务器的应答可以进行广播（但通常是不用广播的）。
如果服务器的应答是通过广播传送的，同时客户又选择未用的临时端口，那么这些广播
